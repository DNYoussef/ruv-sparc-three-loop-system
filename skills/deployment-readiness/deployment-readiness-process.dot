digraph DeploymentReadinessProcess {
    rankdir=TB;
    compound=true;
    node [shape=box, style=filled, fontname="Arial"];
    edge [fontname="Arial"];

    // Start and end
    start [shape=ellipse, label="Start:\nDeployment Readiness\n(Gate 2 APPROVED)", fillcolor=lightgreen];
    end [shape=ellipse, label="Complete:\nProduction Ready\nDeployment Plan Validated", fillcolor=green, fontcolor=white];

    // Phase 1: Infrastructure Validation
    subgraph cluster_phase1 {
        label="Phase 1: Infrastructure Validation (2-3 days)";
        fillcolor=lightyellow;
        style=filled;

        capacity_planning [label="tester agent:\nCapacity Planning"];
        environment_setup [label="Setup Production\nEnvironment"];
        verify_deployment [label="Verify Infrastructure\nDeployed"];

        capacity_planning -> environment_setup;
        environment_setup -> verify_deployment;
    }

    // Phase 2: Performance Benchmarking
    subgraph cluster_phase2 {
        label="Phase 2: Performance Benchmarking (1-2 days)";
        fillcolor=lightblue;
        style=filled;

        latency_bench [label="Latency Benchmarking\n(P95 <100ms)"];
        throughput_bench [label="Throughput Benchmarking\n(â‰¥100 QPS)"];
        resource_util [label="Resource Utilization\n(Target 70%)"];

        latency_bench -> throughput_bench;
        throughput_bench -> resource_util;
    }

    // Performance check
    perf_check [shape=diamond, label="Performance\nMeets SLA?", fillcolor=yellow];
    optimize_perf [shape=octagon, label="WARNING:\nOptimize Performance\n(quantization, scaling)", fillcolor=orange];

    // Phase 3: Monitoring & Observability
    subgraph cluster_phase3 {
        label="Phase 3: Monitoring & Observability (2-3 days)";
        fillcolor=lightblue;
        style=filled;

        metrics_collection [label="Setup Metrics\nCollection\n(Prometheus)"];
        alerting [label="Configure Alerts\n(Latency, Errors, Resources)"];
        dashboards [label="Create Dashboards\n(Grafana)"];
        test_monitoring [label="Test Monitoring\nPipeline"];

        metrics_collection -> alerting;
        alerting -> dashboards;
        dashboards -> test_monitoring;
    }

    // Phase 4: Incident Response
    subgraph cluster_phase4 {
        label="Phase 4: Incident Response (1-2 days)";
        fillcolor=lightblue;
        style=filled;

        incident_plan [label="archivist agent:\nIncident Response Plan"];
        runbooks [label="Create Runbooks\n(High Latency, Errors, OOM)"];
        rollback_strategy [label="Rollback Strategy\n(Blue-Green)"];
        test_rollback [label="Test Rollback\nProcedure"];

        incident_plan -> runbooks;
        runbooks -> rollback_strategy;
        rollback_strategy -> test_rollback;
    }

    // Phase 5: Security Validation
    subgraph cluster_phase5 {
        label="Phase 5: Security Validation (1-2 days)";
        fillcolor=lightblue;
        style=filled;

        auth_authz [label="Authentication &\nAuthorization"];
        data_security [label="Data Security\n(Encryption, PII)"];
        model_security [label="Model Security\n(Adversarial Detection)"];
        infra_security [label="Infrastructure Security\n(Network Policies)"];

        auth_authz -> data_security;
        data_security -> model_security;
        model_security -> infra_security;
    }

    // Security check
    security_check [shape=diamond, label="Security\nValidation\nPassed?", fillcolor=yellow];
    fix_security [shape=octagon, label="CRITICAL:\nFix Security Issues", fillcolor=orange];

    // Phase 6: Documentation
    subgraph cluster_phase6 {
        label="Phase 6: Documentation (1-2 days)";
        fillcolor=lightblue;
        style=filled;

        deployment_checklist [label="archivist agent:\nDeployment Checklist"];
        operations_manual [label="Operations Manual"];
        deployment_plan [label="Deployment Plan\nDocument"];

        deployment_checklist -> operations_manual;
        operations_manual -> deployment_plan;
    }

    // Deliverables
    deliverables [label="Deliverables:\n- Infrastructure requirements\n- Performance benchmarks\n- Monitoring plan\n- Incident response plan\n- Rollback strategy\n- Deployment checklist"];

    // External references
    production_env [shape=cylinder, label="Production Environment:\nKubernetes Cluster\nGPU Nodes", fillcolor=lightcoral];
    monitoring_stack [shape=cylinder, label="Monitoring Stack:\nPrometheus + Grafana\nAlertManager", fillcolor=lightcoral];

    // Concepts
    sre_practices [shape=folder, label="SRE Best Practices:\nGoogle SRE Handbook\nFour Golden Signals", fillcolor=lightsalmon];
    security_standards [shape=folder, label="Security Standards:\nOWASP Top 10\nNIST Cybersecurity", fillcolor=lightsalmon];

    // Main flow
    start -> capacity_planning [lhead=cluster_phase1];
    verify_deployment -> latency_bench [lhead=cluster_phase2];

    // Performance check
    resource_util -> perf_check;
    perf_check -> metrics_collection [label="yes", color=green, lhead=cluster_phase3];
    perf_check -> optimize_perf [label="no", color=red];
    optimize_perf -> latency_bench [label="retry", style=dashed];

    // Monitoring to incident response
    test_monitoring -> incident_plan [lhead=cluster_phase4];

    // Incident response to security
    test_rollback -> auth_authz [lhead=cluster_phase5];

    // Security check
    infra_security -> security_check;
    security_check -> deployment_checklist [label="yes", color=green, lhead=cluster_phase6];
    security_check -> fix_security [label="no", color=red];
    fix_security -> auth_authz [label="fix & retry", style=dashed];

    // Documentation to deliverables
    deployment_plan -> deliverables;
    deliverables -> end;

    // External references
    environment_setup -> production_env [style=dashed, label="deploys to"];
    metrics_collection -> monitoring_stack [style=dashed, label="configures"];

    // Concept references
    test_monitoring -> sre_practices [style=dashed, label="follows"];
    auth_authz -> security_standards [style=dashed, label="implements"];

    labelloc="t";
    label="Deployment Readiness Process Flow\nDeep Research SOP - Pipeline H - Gate 3\n6 Phases, tester + archivist agents, Production Validation";
    fontsize=16;
    fontname="Arial Bold";
}
