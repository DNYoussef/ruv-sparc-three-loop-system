digraph ProductLaunchWorkflow {
    rankdir=TB;
    compound=true;
    node [shape=box, style=filled, fontname="Arial"];
    edge [fontname="Arial"];

    // Start and end nodes
    start [shape=ellipse, label="Start:\nProduct Launch\nInitiation", fillcolor=lightgreen];
    end [shape=ellipse, label="Complete:\nLive Product +\nContinuous Optimization", fillcolor=green, fontcolor=white];

    // Phase 1: Research & Planning (Week 1-2)
    subgraph cluster_phase1 {
        label="Phase 1: Research & Planning (Week 1-2)\nSequential Analysis";
        fillcolor=lightyellow;
        style=filled;

        p1_market [label="Market Researcher\nAnalyze market,\ncompetitors, trends", fillcolor=lightblue];
        p1_business [label="Business Analyst\nSWOT, revenue\nprojections, risks", fillcolor=lightblue];
        p1_product [label="Product Manager\nPositioning, pricing,\nGTM strategy", fillcolor=lightblue];

        p1_market -> p1_business [label="market data"];
        p1_business -> p1_product [label="business\nvalidation"];
    }

    // Phase 2: Product Development (Week 3-8)
    subgraph cluster_phase2 {
        label="Phase 2: Product Development (Week 3-8)\nParallel Mesh Execution";
        fillcolor=lightcyan;
        style=filled;

        p2_backend [label="Backend Developer\nAPI, auth,\nbusiness logic", fillcolor=lightblue];
        p2_frontend [label="Frontend Developer\nReact/Vue UI,\ncomponents", fillcolor=lightblue];
        p2_mobile [label="Mobile Developer\niOS/Android apps,\noffline sync", fillcolor=lightblue];
        p2_database [label="Database Architect\nSchema, indexes,\noptimization", fillcolor=lightblue];
        p2_security [label="Security Specialist\nAudit, compliance,\npenetration test", fillcolor=lightblue];
        p2_qa [label="QA Engineer\nUnit, integration,\nE2E tests", fillcolor=lightblue];

        // Parallel development (no direct edges, mesh coordination)
        p2_backend -> p2_frontend [style=dashed, label="API spec", color=gray];
        p2_backend -> p2_mobile [style=dashed, label="API spec", color=gray];
        p2_database -> p2_backend [style=dashed, label="schema", color=gray];
        p2_security -> p2_backend [style=dashed, label="audit", color=gray];
        p2_qa -> p2_backend [style=dashed, label="tests", color=gray];
        p2_qa -> p2_frontend [style=dashed, label="tests", color=gray];
    }

    // Phase 2 Integration
    p2_integration [label="System Integration\nCombine all components,\nperformance tuning", fillcolor=orange, shape=octagon];
    p2_backend -> p2_integration [ltail=cluster_phase2, label="all\ncomponents"];

    // Phase 3: Marketing & Sales Prep (Week 5-9)
    subgraph cluster_phase3 {
        label="Phase 3: Marketing & Sales Prep (Week 5-9)\nParallel Star Execution";
        fillcolor=lightsalmon;
        style=filled;

        p3_marketing [label="Marketing Specialist\nCampaigns, channels,\nKPIs", fillcolor=lightblue];
        p3_content [label="Content Creator\nBlogs, social, email,\nvideos", fillcolor=lightblue];
        p3_seo [label="SEO Specialist\nKeywords, on-page,\nlink building", fillcolor=lightblue];
        p3_sales [label="Sales Specialist\nEnablement, playbook,\nCRM", fillcolor=lightblue];
        p3_support [label="Support Specialist\nKnowledge base,\nworkflows", fillcolor=lightblue];
    }

    // Decision Gate: Production Ready?
    gate_production [shape=diamond, label="Production\nReady?", fillcolor=yellow];
    p2_integration -> gate_production;

    // Phase 4: Launch Execution (Week 10)
    subgraph cluster_phase4 {
        label="Phase 4: Launch Execution (Week 10)\nSequential Deployment + Parallel Marketing";
        fillcolor=lightgreen;
        style=filled;

        p4_validator [label="Production Validator\nGo/no-go decision,\nfinal checks", fillcolor=lightblue];
        p4_devops [label="DevOps Engineer\nBlue-green deploy,\nmonitoring setup", fillcolor=lightblue];
        p4_launch [label="Marketing Launch Blitz\nEmail, social, ads,\nPR campaigns", fillcolor=lightblue];
        p4_monitor [label="Performance Monitor\nReal-time metrics,\nalerting", fillcolor=lightblue];

        p4_validator -> p4_devops [label="approved"];
        p4_devops -> p4_launch [label="live"];
        p4_devops -> p4_monitor [label="monitoring"];
    }

    // Phase 5: Post-Launch Monitoring (Week 11+)
    subgraph cluster_phase5 {
        label="Phase 5: Post-Launch Monitoring (Week 11+)\nContinuous Adaptive Optimization";
        fillcolor=lavender;
        style=filled;

        p5_weekly [label="Weekly Review\nAggregate metrics,\ngenerate insights", fillcolor=lightblue];
        p5_optimize [label="Adaptive Optimization\nA/B tests, funnel\nanalysis, improvements", fillcolor=lightblue];

        p5_weekly -> p5_optimize [label="insights"];
        p5_optimize -> p5_weekly [label="results", style=dashed];
    }

    // External references
    memory [shape=cylinder, label="Memory System\nproduct-launch/\n{launch-id}/*", fillcolor=lightcoral];
    hooks [shape=cylinder, label="Hooks Automation\npre-task, post-task,\nsession management", fillcolor=lightcoral];

    // Main workflow flow
    start -> p1_market [lhead=cluster_phase1];
    p1_product -> p2_backend [ltail=cluster_phase1, lhead=cluster_phase2, label="product\nstrategy"];

    // Phase 2 and 3 overlap (parallel)
    p1_product -> p3_marketing [ltail=cluster_phase1, lhead=cluster_phase3, label="GTM\nstrategy", style=dashed];

    // Production gate
    gate_production -> p4_validator [lhead=cluster_phase4, label="yes", color=green];
    gate_production -> p2_integration [label="no\n(fix issues)", color=red, style=dashed];

    // Launch to monitoring
    p4_monitor -> p5_weekly [ltail=cluster_phase4, lhead=cluster_phase5, label="launch\nmetrics"];

    // End state
    p5_weekly -> end [ltail=cluster_phase5, label="ongoing"];

    // Memory coordination (dashed lines to memory)
    p1_product -> memory [style=dashed, label="store phase 1", color=purple];
    p2_integration -> memory [style=dashed, label="store phase 2", color=purple];
    p3_marketing -> memory [style=dashed, label="store phase 3", color=purple];
    p4_monitor -> memory [style=dashed, label="store phase 4", color=purple];
    p5_weekly -> memory [style=dashed, label="store phase 5", color=purple];

    // Hooks integration
    start -> hooks [style=dashed, label="pre-task", color=blue];
    end -> hooks [style=dashed, label="post-task", color=blue];

    // Critical warnings
    warning_security [shape=octagon, label="CRITICAL:\nSecurity Audit\nMust Pass", fillcolor=orange];
    p2_security -> warning_security [style=dashed];
    warning_security -> gate_production [style=dashed, label="required"];

    labelloc="t";
    label="Product Launch Orchestration Workflow\n15+ Agents | 5 Phases | 10 Weeks | Hierarchical + Parallel Coordination";
    fontsize=16;
    fontname="Arial Bold";
}
