// Parallel Execution Command Workflow
// Optimize for parallel execution with 8.3x speedup
digraph parallel_execution_command {
    // Graph attributes
    graph [
        rankdir=TB,
        bgcolor="#0a0e1a",
        fontname="Arial",
        fontsize=12,
        splines=ortho,
        nodesep=0.6,
        ranksep=1.0
    ];

    node [
        shape=box,
        style="rounded,filled",
        fontname="Arial",
        fontsize=10,
        margin=0.2
    ];

    edge [
        fontname="Arial",
        fontsize=9,
        color="#4a90e2"
    ];

    // === COMMAND TRIGGER ===
    subgraph cluster_trigger {
        label="Command Trigger";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        cmd_trigger [label="/parallel-execution\nCommand", fillcolor="#d97706", fontcolor="#ffffff"];
        parse_args [label="Parse Task\nArguments", fillcolor="#2d3748", fontcolor="#ffffff"];
        validate_input [label="Validate\nInput", fillcolor="#2d3748", fontcolor="#ffffff"];
    }

    // === TASK ANALYSIS ===
    subgraph cluster_analysis {
        label="Task Analysis";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        dependency_analyzer [label="Dependency\nAnalyzer", fillcolor="#2563eb", fontcolor="#ffffff"];
        task_breaker [label="Task\nBreaker", fillcolor="#2563eb", fontcolor="#ffffff"];
        parallel_identifier [label="Parallel\nIdentifier", fillcolor="#2563eb", fontcolor="#ffffff"];
        sequential_identifier [label="Sequential\nIdentifier", fillcolor="#2563eb", fontcolor="#ffffff"];
    }

    // === PARALLEL OPTIMIZATION ===
    subgraph cluster_parallel {
        label="Parallel Optimization (8.3x Speedup)";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        parallel_scheduler [label="Parallel Task\nScheduler", fillcolor="#10b981", fontcolor="#ffffff"];
        concurrent_executor [label="Concurrent\nExecutor", fillcolor="#10b981", fontcolor="#ffffff"];
        thread_pool [label="Thread Pool\nManager", fillcolor="#10b981", fontcolor="#ffffff"];
        load_balancer [label="Load\nBalancer", fillcolor="#10b981", fontcolor="#ffffff"];
    }

    // === EXECUTION GROUPS ===
    subgraph cluster_groups {
        label="Execution Groups";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        group1 [label="Parallel Group 1\n(Independent Tasks)", fillcolor="#7c3aed", fontcolor="#ffffff"];
        group2 [label="Parallel Group 2\n(Independent Tasks)", fillcolor="#7c3aed", fontcolor="#ffffff"];
        group3 [label="Sequential Group\n(Dependent Tasks)", fillcolor="#dc2626", fontcolor="#ffffff"];
        group4 [label="Parallel Group 3\n(Final Stage)", fillcolor="#7c3aed", fontcolor="#ffffff"];
    }

    // === SYNCHRONIZATION ===
    subgraph cluster_sync {
        label="Synchronization";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        barrier1 [label="Barrier 1\nSync Point", fillcolor="#ef4444", fontcolor="#ffffff"];
        barrier2 [label="Barrier 2\nSync Point", fillcolor="#ef4444", fontcolor="#ffffff"];
        result_aggregator [label="Result\nAggregator", fillcolor="#ef4444", fontcolor="#ffffff"];
        conflict_resolver [label="Conflict\nResolver", fillcolor="#ef4444", fontcolor="#ffffff"];
    }

    // === PERFORMANCE MONITORING ===
    subgraph cluster_performance {
        label="Performance Monitoring";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        speedup_tracker [label="Speedup\nTracker (8.3x)", fillcolor="#f59e0b", fontcolor="#ffffff"];
        efficiency_monitor [label="Efficiency\nMonitor", fillcolor="#f59e0b", fontcolor="#ffffff"];
        bottleneck_detector [label="Bottleneck\nDetector", fillcolor="#f59e0b", fontcolor="#ffffff"];
        latency_profiler [label="Latency\nProfiler", fillcolor="#f59e0b", fontcolor="#ffffff"];
    }

    // === OUTPUT GENERATION ===
    subgraph cluster_output {
        label="Output Generation";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        result_formatter [label="Result\nFormatter", fillcolor="#059669", fontcolor="#ffffff"];
        performance_report [label="Performance\nReport", fillcolor="#059669", fontcolor="#ffffff"];
        optimization_recommendations [label="Optimization\nRecommendations", fillcolor="#059669", fontcolor="#ffffff"];
    }

    // === COMMAND FLOW ===
    cmd_trigger -> parse_args [label="Trigger"];
    parse_args -> validate_input [label="Parse"];
    validate_input -> dependency_analyzer [label="Validate"];

    // === ANALYSIS FLOW ===
    dependency_analyzer -> task_breaker [label="Analyze"];
    task_breaker -> parallel_identifier [label="Break Down"];
    task_breaker -> sequential_identifier [label="Break Down"];
    parallel_identifier -> parallel_scheduler [label="Identify Parallel"];
    sequential_identifier -> parallel_scheduler [label="Identify Sequential"];

    // === OPTIMIZATION FLOW ===
    parallel_scheduler -> concurrent_executor [label="Schedule"];
    concurrent_executor -> thread_pool [label="Execute"];
    thread_pool -> load_balancer [label="Distribute"];

    // === EXECUTION FLOW ===
    load_balancer -> group1 [label="Dispatch"];
    load_balancer -> group2 [label="Dispatch"];
    group1 -> barrier1 [label="Complete"];
    group2 -> barrier1 [label="Complete"];
    barrier1 -> group3 [label="Synchronized"];
    group3 -> barrier2 [label="Complete"];
    barrier2 -> group4 [label="Synchronized"];
    group4 -> result_aggregator [label="Complete"];

    // === SYNCHRONIZATION FLOW ===
    result_aggregator -> conflict_resolver [label="Aggregate"];
    conflict_resolver -> speedup_tracker [label="Resolve"];

    // === MONITORING FLOW ===
    speedup_tracker -> efficiency_monitor [label="Track"];
    efficiency_monitor -> bottleneck_detector [label="Monitor"];
    bottleneck_detector -> latency_profiler [label="Detect"];

    // === OUTPUT FLOW ===
    latency_profiler -> result_formatter [label="Profile"];
    result_formatter -> performance_report [label="Format"];
    performance_report -> optimization_recommendations [label="Report"];
    optimization_recommendations -> cmd_trigger [label="Complete", style=bold, color="#10b981"];

    // === FEEDBACK LOOPS ===
    bottleneck_detector -> parallel_scheduler [label="Re-optimize", style=dashed, color="#ef4444"];
    conflict_resolver -> result_aggregator [label="Retry", style=dashed, color="#ef4444"];

    // Legend
    subgraph cluster_legend {
        label="Legend";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        legend1 [label="Command", fillcolor="#d97706", fontcolor="#ffffff"];
        legend2 [label="Parallel (8.3x)", fillcolor="#10b981", fontcolor="#ffffff"];
        legend3 [label="Parallel Groups", fillcolor="#7c3aed", fontcolor="#ffffff"];
        legend4 [label="Sequential", fillcolor="#dc2626", fontcolor="#ffffff"];
        legend5 [label="Sync Points", fillcolor="#ef4444", fontcolor="#ffffff"];
    }
}
