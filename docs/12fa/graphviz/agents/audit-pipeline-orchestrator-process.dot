// Audit Pipeline Orchestrator Agent - Complete Audit Pipeline
// Theater detection, functionality audit, quality gates, comprehensive validation
digraph audit_pipeline_orchestrator_agent {
    graph [rankdir=TB, bgcolor="#0a0e1a", fontname="Arial", fontsize=12, splines=ortho, nodesep=0.6, ranksep=1.0];
    node [shape=box, style="rounded,filled", fontname="Arial", fontsize=10, margin=0.2];
    edge [fontname="Arial", fontsize=9, color="#4a90e2"];

    subgraph cluster_init {
        label="Agent Initialization"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        audit_init [label="Audit Pipeline\nOrchestrator", fillcolor="#d97706", fontcolor="#ffffff"];
        pipeline_config [label="Pipeline\nConfiguration", fillcolor="#2d3748", fontcolor="#ffffff"];
        quality_criteria [label="Quality\nCriteria", fillcolor="#2d3748", fontcolor="#ffffff"];
    }

    subgraph cluster_theater {
        label="Theater Detection"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        pattern_detector [label="Pattern\nDetector", fillcolor="#2563eb", fontcolor="#ffffff"];
        hardcode_finder [label="Hardcode\nFinder", fillcolor="#2563eb", fontcolor="#ffffff"];
        fake_impl_detector [label="Fake Implementation\nDetector", fillcolor="#2563eb", fontcolor="#ffffff"];
        bypass_detector [label="Bypass\nDetector", fillcolor="#2563eb", fontcolor="#ffffff"];
    }

    subgraph cluster_functionality {
        label="Functionality Audit"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        sandbox_tester [label="Sandbox\nTester", fillcolor="#059669", fontcolor="#ffffff"];
        edge_case_tester [label="Edge Case\nTester", fillcolor="#059669", fontcolor="#ffffff"];
        integration_validator [label="Integration\nValidator", fillcolor="#059669", fontcolor="#ffffff"];
        error_handler_tester [label="Error Handler\nTester", fillcolor="#059669", fontcolor="#ffffff"];
    }

    subgraph cluster_quality {
        label="Quality Validation"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        code_coverage [label="Code Coverage\n>90%", fillcolor="#0891b2", fontcolor="#ffffff"];
        complexity_checker [label="Complexity\nChecker", fillcolor="#0891b2", fontcolor="#ffffff"];
        security_scanner [label="Security\nScanner", fillcolor="#0891b2", fontcolor="#ffffff"];
        performance_profiler [label="Performance\nProfiler", fillcolor="#0891b2", fontcolor="#ffffff"];
    }

    subgraph cluster_gates {
        label="Quality Gates"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        gate_1_theater [label="Gate 1:\nTheater Free", fillcolor="#dc2626", fontcolor="#ffffff"];
        gate_2_functional [label="Gate 2:\nFunctional", fillcolor="#dc2626", fontcolor="#ffffff"];
        gate_3_quality [label="Gate 3:\nQuality Standards", fillcolor="#dc2626", fontcolor="#ffffff"];
        gate_4_production [label="Gate 4:\nProduction Ready", fillcolor="#dc2626", fontcolor="#ffffff"];
    }

    subgraph cluster_repair {
        label="Automated Repair"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        issue_classifier [label="Issue\nClassifier", fillcolor="#8b4789", fontcolor="#ffffff"];
        fix_generator [label="Fix\nGenerator", fillcolor="#8b4789", fontcolor="#ffffff"];
        auto_repairer [label="Auto\nRepairer", fillcolor="#8b4789", fontcolor="#ffffff"];
        verification_tester [label="Verification\nTester", fillcolor="#8b4789", fontcolor="#ffffff"];
    }

    subgraph cluster_reporting {
        label="Reporting"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        metrics_aggregator [label="Metrics\nAggregator", fillcolor="#ef4444", fontcolor="#ffffff"];
        report_generator [label="Report\nGenerator", fillcolor="#ef4444", fontcolor="#ffffff"];
        dashboard_updater [label="Dashboard\nUpdater", fillcolor="#ef4444", fontcolor="#ffffff"];
    }

    subgraph cluster_collab {
        label="Agent Collaboration"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        cicd_coord [label="CI/CD\nCoordination", fillcolor="#6366f1", fontcolor="#ffffff"];
        reviewer_coord [label="Reviewer\nCoordination", fillcolor="#6366f1", fontcolor="#ffffff"];
    }

    audit_init -> pipeline_config [label="Load"];
    audit_init -> quality_criteria [label="Load"];
    pipeline_config -> pattern_detector [label="Detect Patterns"];
    pattern_detector -> hardcode_finder [label="Find Hardcodes"];
    hardcode_finder -> fake_impl_detector [label="Detect Fakes"];
    fake_impl_detector -> bypass_detector [label="Detect Bypasses"];
    bypass_detector -> gate_1_theater [label="Gate 1"];
    gate_1_theater -> sandbox_tester [label="Pass"];
    sandbox_tester -> edge_case_tester [label="Test Edge Cases"];
    edge_case_tester -> integration_validator [label="Validate Integration"];
    integration_validator -> error_handler_tester [label="Test Error Handling"];
    error_handler_tester -> gate_2_functional [label="Gate 2"];
    gate_2_functional -> code_coverage [label="Pass"];
    code_coverage -> complexity_checker [label="Check Complexity"];
    complexity_checker -> security_scanner [label="Scan Security"];
    security_scanner -> performance_profiler [label="Profile"];
    performance_profiler -> gate_3_quality [label="Gate 3"];
    gate_3_quality -> gate_4_production [label="Pass"];
    gate_4_production -> metrics_aggregator [label="Success"];
    gate_1_theater -> issue_classifier [label="Fail", style=dashed, color="#ef4444"];
    gate_2_functional -> issue_classifier [label="Fail", style=dashed, color="#ef4444"];
    gate_3_quality -> issue_classifier [label="Fail", style=dashed, color="#ef4444"];
    issue_classifier -> fix_generator [label="Generate Fix"];
    fix_generator -> auto_repairer [label="Apply Fix"];
    auto_repairer -> verification_tester [label="Verify"];
    verification_tester -> pattern_detector [label="Re-run Pipeline"];
    metrics_aggregator -> report_generator [label="Generate Report"];
    report_generator -> dashboard_updater [label="Update Dashboard"];
    dashboard_updater -> cicd_coord [label="Coordinate"];
    report_generator -> reviewer_coord [label="Coordinate"];

    subgraph cluster_legend {
        label="Legend"; style=filled; color="#1a1f35"; fontcolor="#ffffff";
        legend1 [label="Audit Orchestrator", fillcolor="#d97706", fontcolor="#ffffff"];
        legend2 [label="Theater Detection", fillcolor="#2563eb", fontcolor="#ffffff"];
    }
}
