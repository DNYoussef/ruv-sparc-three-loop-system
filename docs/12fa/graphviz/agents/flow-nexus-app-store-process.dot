digraph flow_nexus_app_store_workflow {
    // Graph properties
    rankdir=TB;
    bgcolor="#f8f9fa";
    fontname="Arial";
    fontsize=14;
    label="Flow Nexus App Store Agent Workflow\nAgent ID: agent-087 | Category: Flow-Nexus Integration\nPurpose: App marketplace and template deployment";
    labelloc=t;

    // Node styling
    node [fontname="Arial", fontsize=11, style="filled"];

    // Start/End
    start [label="App Store\nRequest", shape=oval, fillcolor="#e8f5e9", color="#4caf50", penwidth=2];
    end [label="App Deployed/\nPublished", shape=oval, fillcolor="#e8f5e9", color="#4caf50", penwidth=2];

    // Phase 1: Browse Templates
    subgraph cluster_browse {
        label="Phase 1: Browse Templates";
        style=filled;
        fillcolor="#fff3e0";
        color="#ff9800";
        penwidth=2;

        b1 [label="List Templates", shape=box, fillcolor="#ffecb3"];
        b2 [label="Filter by Category", shape=box, fillcolor="#ffecb3"];
        b3 [label="Search by Tags", shape=box, fillcolor="#ffecb3"];
        b4 [label="View Template\nDetails", shape=box, fillcolor="#ffecb3"];
        b5 [label="Check Ratings", shape=box, fillcolor="#ffecb3"];

        b1 -> b2 -> b3 -> b4 -> b5;
    }

    // Phase 2: Template Deployment
    subgraph cluster_deploy {
        label="Phase 2: Template Deployment";
        style=filled;
        fillcolor="#e3f2fd";
        color="#2196f3";
        penwidth=2;

        d1 [label="Select Template", shape=box, fillcolor="#bbdefb"];
        d2 [label="Configure\nVariables", shape=box, fillcolor="#bbdefb"];
        d3 [label="Set Deployment\nName", shape=box, fillcolor="#bbdefb"];
        d4 [label="Add Environment\nVariables", shape=box, fillcolor="#bbdefb"];
        d5 [label="Deploy Template", shape=box, fillcolor="#bbdefb"];

        d1 -> d2 -> d3 -> d4 -> d5;
    }

    // Phase 3: App Publishing
    subgraph cluster_publish {
        label="Phase 3: App Publishing";
        style=filled;
        fillcolor="#f3e5f5";
        color="#9c27b0";
        penwidth=2;

        p1 [label="Prepare Source\nCode", shape=box, fillcolor="#e1bee7"];
        p2 [label="Write App\nDescription", shape=box, fillcolor="#e1bee7"];
        p3 [label="Select Category", shape=box, fillcolor="#e1bee7"];
        p4 [label="Add Tags", shape=box, fillcolor="#e1bee7"];
        p5 [label="Set Version\nNumber", shape=box, fillcolor="#e1bee7"];
        p6 [label="Publish to Store", shape=box, fillcolor="#e1bee7"];

        p1 -> p2 -> p3 -> p4 -> p5 -> p6;
    }

    // Phase 4: App Management
    subgraph cluster_management {
        label="Phase 4: App Management";
        style=filled;
        fillcolor="#fce4ec";
        color="#e91e63";
        penwidth=2;

        m1 [label="Get App Details", shape=box, fillcolor="#f8bbd0"];
        m2 [label="Update App Info", shape=box, fillcolor="#f8bbd0"];
        m3 [label="View Analytics", shape=box, fillcolor="#f8bbd0"];
        m4 [label="Check Installed\nApps", shape=box, fillcolor="#f8bbd0"];

        m1 -> m2 -> m3 -> m4;
    }

    // Decisions
    choice [label="Browse or\nPublish?", shape=diamond, fillcolor="#c8e6c9", color="#388e3c", penwidth=2];

    // Flow
    start -> choice;
    choice -> b1 [label="Browse"];
    choice -> p1 [label="Publish"];

    b5 -> d1 [label="Select"];
    d5 -> end;

    p6 -> m1 [label="Published"];
    m4 -> end;

    // Capabilities
    capabilities [label="Key Capabilities:\n• Template Browsing\n• App Deployment\n• App Publishing\n• Marketplace Search\n• Analytics\n• Version Management", shape=note, fillcolor="#e8eaf6", color="#3f51b5", fontsize=10];

    // MCP Tools
    tools [label="MCP Tools:\n• app_store_list_templates\n• app_store_publish_app\n• app_get\n• app_update\n• app_search\n• app_analytics\n• app_installed", shape=note, fillcolor="#ede7f6", color="#673ab7", fontsize=10];

    // Metadata
    metadata [label="Agent: flow-nexus-app-store\nPriority: Medium\nComplexity: High\nGraphviz Priority: 87", shape=note, fillcolor="#f5f5f5", color="#9e9e9e", fontsize=9];
}
