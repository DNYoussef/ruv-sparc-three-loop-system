digraph backend_api_enhanced_workflow {
    // Graph properties
    rankdir=TB;
    bgcolor="#f8f9fa";
    fontname="Arial";
    fontsize=14;
    label="Backend API Enhanced Agent Workflow (v2.0.0)\nAgent ID: agent-098 | Category: Specialized Development\nPurpose: Advanced API design with microservices";
    labelloc=t;

    // Node styling
    node [fontname="Arial", fontsize=11, style="filled"];

    // Start/End
    start [label="API Development\nRequest", shape=oval, fillcolor="#e8f5e9", color="#4caf50", penwidth=2];
    end [label="API Deployed", shape=oval, fillcolor="#e8f5e9", color="#4caf50", penwidth=2];

    // Phase 1: Advanced API Design
    subgraph cluster_design {
        label="Phase 1: Advanced API Design";
        style=filled;
        fillcolor="#fff3e0";
        color="#ff9800";
        penwidth=2;

        d1 [label="RESTful/GraphQL\nArchitecture", shape=box, fillcolor="#ffecb3"];
        d2 [label="Resource Modeling", shape=box, fillcolor="#ffecb3"];
        d3 [label="Versioning Strategy", shape=box, fillcolor="#ffecb3"];
        d4 [label="OpenAPI\nSpecification", shape=box, fillcolor="#ffecb3"];

        d1 -> d2 -> d3 -> d4;
    }

    // Phase 2: Microservices Architecture
    subgraph cluster_microservices {
        label="Phase 2: Microservices Architecture";
        style=filled;
        fillcolor="#e3f2fd";
        color="#2196f3";
        penwidth=2;

        micro1 [label="Service\nDecomposition", shape=box, fillcolor="#bbdefb"];
        micro2 [label="API Gateway\nDesign", shape=box, fillcolor="#bbdefb"];
        micro3 [label="Service Discovery", shape=box, fillcolor="#bbdefb"];
        micro4 [label="Load Balancing", shape=box, fillcolor="#bbdefb"];
        micro5 [label="Circuit Breaker\nPattern", shape=box, fillcolor="#bbdefb"];

        micro1 -> micro2 -> micro3 -> micro4 -> micro5;
    }

    // Phase 3: Distributed Systems
    subgraph cluster_distributed {
        label="Phase 3: Distributed Systems";
        style=filled;
        fillcolor="#f3e5f5";
        color="#9c27b0";
        penwidth=2;

        dist1 [label="Event-Driven\nArchitecture", shape=box, fillcolor="#e1bee7"];
        dist2 [label="Message Queue\nIntegration", shape=box, fillcolor="#e1bee7"];
        dist3 [label="Saga Pattern\nfor Transactions", shape=box, fillcolor="#e1bee7"];
        dist4 [label="CQRS Implementation", shape=box, fillcolor="#e1bee7"];

        dist1 -> dist2 -> dist3 -> dist4;
    }

    // Phase 4: Advanced Security
    subgraph cluster_security {
        label="Phase 4: Advanced Security";
        style=filled;
        fillcolor="#fce4ec";
        color="#e91e63";
        penwidth=2;

        sec1 [label="JWT + OAuth2.0", shape=box, fillcolor="#f8bbd0"];
        sec2 [label="API Key Management", shape=box, fillcolor="#f8bbd0"];
        sec3 [label="Rate Limiting", shape=box, fillcolor="#f8bbd0"];
        sec4 [label="CORS Configuration", shape=box, fillcolor="#f8bbd0"];
        sec5 [label="Encryption\n(TLS 1.3)", shape=box, fillcolor="#f8bbd0"];

        sec1 -> sec2 -> sec3 -> sec4 -> sec5;
    }

    // Phase 5: Database & Caching
    subgraph cluster_data {
        label="Phase 5: Database & Caching";
        style=filled;
        fillcolor="#e0f2f1";
        color="#009688";
        penwidth=2;

        data1 [label="Multi-Database\nSupport", shape=box, fillcolor="#b2dfdb"];
        data2 [label="Connection Pooling", shape=box, fillcolor="#b2dfdb"];
        data3 [label="Redis Caching\nStrategy", shape=box, fillcolor="#b2dfdb"];
        data4 [label="Query Optimization", shape=box, fillcolor="#b2dfdb"];

        data1 -> data2 -> data3 -> data4;
    }

    // Phase 6: Observability
    subgraph cluster_observability {
        label="Phase 6: Observability";
        style=filled;
        fillcolor="#fff9c4";
        color="#fbc02d";
        penwidth=2;

        obs1 [label="Distributed Tracing\n(Jaeger/Zipkin)", shape=box, fillcolor="#fff59d"];
        obs2 [label="Metrics Collection\n(Prometheus)", shape=box, fillcolor="#fff59d"];
        obs3 [label="Structured Logging", shape=box, fillcolor="#fff59d"];
        obs4 [label="Health Checks\n& Readiness", shape=box, fillcolor="#fff59d"];

        obs1 -> obs2 -> obs3 -> obs4;
    }

    // Phase 7: Deployment & Scaling
    subgraph cluster_deployment {
        label="Phase 7: Deployment & Scaling";
        style=filled;
        fillcolor="#e1f5fe";
        color="#0288d1";
        penwidth=2;

        dep1 [label="Docker\nContainerization", shape=box, fillcolor="#b3e5fc"];
        dep2 [label="Kubernetes\nOrchestration", shape=box, fillcolor="#b3e5fc"];
        dep3 [label="Horizontal Pod\nAutoscaling", shape=box, fillcolor="#b3e5fc"];
        dep4 [label="Blue-Green\nDeployment", shape=box, fillcolor="#b3e5fc"];

        dep1 -> dep2 -> dep3 -> dep4;
    }

    // Decisions
    architecture [label="Choose\nArchitecture", shape=diamond, fillcolor="#c8e6c9", color="#388e3c", penwidth=2];

    // Flow
    start -> d1;
    d4 -> architecture;

    architecture -> micro1 [label="Microservices"];
    architecture -> dist1 [label="Monolith", style=dashed];

    micro5 -> dist1;
    dist4 -> sec1;
    sec5 -> data1;
    data4 -> obs1;
    obs4 -> dep1;
    dep4 -> end;

    // V2.0 enhancements
    enhancements [label="v2.0.0 Enhancements:\n• Microservices\n• Distributed Systems\n• Advanced Security\n• Observability\n• Auto-scaling\n• Cloud-Native", shape=note, fillcolor="#e8eaf6", color="#3f51b5", fontsize=10];

    // Technologies
    technologies [label="Technologies:\n• REST/GraphQL\n• Kubernetes\n• Redis/Kafka\n• Prometheus/Jaeger\n• PostgreSQL/MongoDB", shape=note, fillcolor="#ede7f6", color="#673ab7", fontsize=10];

    // Metadata
    metadata [label="Agent: backend-api-enhanced\nPriority: High\nComplexity: Very High\nVersion: 2.0.0\nGraphviz Priority: 98", shape=note, fillcolor="#f5f5f5", color="#9e9e9e", fontsize=9];
}
