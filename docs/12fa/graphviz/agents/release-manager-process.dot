// Release Manager Agent - Release Automation
// Automated release, semantic versioning, changelog, deployment
digraph release_manager_agent {
    // Graph attributes
    graph [
        rankdir=TB,
        bgcolor="#0a0e1a",
        fontname="Arial",
        fontsize=12,
        splines=ortho,
        nodesep=0.6,
        ranksep=1.0
    ];

    node [
        shape=box,
        style="rounded,filled",
        fontname="Arial",
        fontsize=10,
        margin=0.2
    ];

    edge [
        fontname="Arial",
        fontsize=9,
        color="#4a90e2"
    ];

    // === INITIALIZATION ===
    subgraph cluster_init {
        label="Agent Initialization";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        release_init [label="Release Manager\nInitialize", fillcolor="#d97706", fontcolor="#ffffff"];
        semver_config [label="Semantic Versioning\nConfig", fillcolor="#2d3748", fontcolor="#ffffff"];
        release_strategy [label="Release\nStrategy", fillcolor="#2d3748", fontcolor="#ffffff"];
        deployment_config [label="Deployment\nConfig", fillcolor="#2d3748", fontcolor="#ffffff"];
    }

    // === VERSION MANAGEMENT ===
    subgraph cluster_version {
        label="Version Management";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        version_calculator [label="Version\nCalculator", fillcolor="#2563eb", fontcolor="#ffffff"];
        semver_validator [label="SemVer\nValidator", fillcolor="#2563eb", fontcolor="#ffffff"];
        breaking_detector [label="Breaking Change\nDetector", fillcolor="#2563eb", fontcolor="#ffffff"];
        version_tagger [label="Version\nTagger", fillcolor="#2563eb", fontcolor="#ffffff"];
    }

    // === CHANGELOG GENERATION ===
    subgraph cluster_changelog {
        label="Changelog Generation";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        commit_parser [label="Commit\nParser", fillcolor="#059669", fontcolor="#ffffff"];
        category_classifier [label="Category\nClassifier", fillcolor="#059669", fontcolor="#ffffff"];
        changelog_writer [label="Changelog\nWriter", fillcolor="#059669", fontcolor="#ffffff"];
        release_notes_gen [label="Release Notes\nGenerator", fillcolor="#059669", fontcolor="#ffffff"];
    }

    // === PRE-RELEASE CHECKS ===
    subgraph cluster_checks {
        label="Pre-Release Validation";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        test_validator [label="Test\nValidator", fillcolor="#0891b2", fontcolor="#ffffff"];
        security_scanner [label="Security\nScanner", fillcolor="#0891b2", fontcolor="#ffffff"];
        dependency_auditor [label="Dependency\nAuditor", fillcolor="#0891b2", fontcolor="#ffffff"];
        build_validator [label="Build\nValidator", fillcolor="#0891b2", fontcolor="#ffffff"];
    }

    // === RELEASE CREATION ===
    subgraph cluster_create {
        label="Release Creation";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        branch_manager [label="Branch\nManager", fillcolor="#dc2626", fontcolor="#ffffff"];
        artifact_builder [label="Artifact\nBuilder", fillcolor="#dc2626", fontcolor="#ffffff"];
        package_publisher [label="Package\nPublisher", fillcolor="#dc2626", fontcolor="#ffffff"];
        github_release [label="GitHub Release\nCreator", fillcolor="#dc2626", fontcolor="#ffffff"];
    }

    // === DEPLOYMENT ===
    subgraph cluster_deploy {
        label="Deployment Orchestration";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        staging_deployer [label="Staging\nDeployer", fillcolor="#8b4789", fontcolor="#ffffff"];
        smoke_tester [label="Smoke\nTester", fillcolor="#8b4789", fontcolor="#ffffff"];
        production_deployer [label="Production\nDeployer", fillcolor="#8b4789", fontcolor="#ffffff"];
        rollback_handler [label="Rollback\nHandler", fillcolor="#8b4789", fontcolor="#ffffff"];
    }

    // === MONITORING ===
    subgraph cluster_monitor {
        label="Post-Release Monitoring";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        health_monitor [label="Health\nMonitor", fillcolor="#ef4444", fontcolor="#ffffff"];
        error_tracker [label="Error\nTracker", fillcolor="#ef4444", fontcolor="#ffffff"];
        metric_collector [label="Metric\nCollector", fillcolor="#ef4444", fontcolor="#ffffff"];
        alert_manager [label="Alert\nManager", fillcolor="#ef4444", fontcolor="#ffffff"];
    }

    // === NOTIFICATION ===
    subgraph cluster_notify {
        label="Notification System";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        slack_announce [label="Slack\nAnnouncement", fillcolor="#10b981", fontcolor="#ffffff"];
        email_announce [label="Email\nAnnouncement", fillcolor="#10b981", fontcolor="#ffffff"];
        docs_updater [label="Docs\nUpdater", fillcolor="#10b981", fontcolor="#ffffff"];
        social_announce [label="Social Media\nAnnouncement", fillcolor="#10b981", fontcolor="#ffffff"];
    }

    // === COLLABORATION ===
    subgraph cluster_collab {
        label="Agent Collaboration";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        cicd_coord [label="CI/CD Engineer\nCoordination", fillcolor="#6366f1", fontcolor="#ffffff"];
        workflow_coord [label="Workflow Automation\nCoordination", fillcolor="#6366f1", fontcolor="#ffffff"];
        issue_coord [label="Issue Tracker\nCoordination", fillcolor="#6366f1", fontcolor="#ffffff"];
    }

    // === INITIALIZATION FLOW ===
    release_init -> semver_config [label="Configure"];
    release_init -> release_strategy [label="Define"];
    release_init -> deployment_config [label="Setup"];

    // === VERSION FLOW ===
    release_strategy -> version_calculator [label="Calculate"];
    version_calculator -> breaking_detector [label="Detect Breaking"];
    breaking_detector -> semver_validator [label="Validate"];
    semver_validator -> version_tagger [label="Tag"];

    // === CHANGELOG FLOW ===
    version_tagger -> commit_parser [label="Parse Commits"];
    commit_parser -> category_classifier [label="Classify"];
    category_classifier -> changelog_writer [label="Write"];
    changelog_writer -> release_notes_gen [label="Generate Notes"];

    // === VALIDATION FLOW ===
    release_notes_gen -> test_validator [label="Run Tests"];
    test_validator -> security_scanner [label="Security Scan"];
    security_scanner -> dependency_auditor [label="Audit Deps"];
    dependency_auditor -> build_validator [label="Validate Build"];

    // === CREATION FLOW ===
    build_validator -> branch_manager [label="Manage Branches"];
    branch_manager -> artifact_builder [label="Build Artifacts"];
    artifact_builder -> package_publisher [label="Publish Package"];
    package_publisher -> github_release [label="Create Release"];

    // === DEPLOYMENT FLOW ===
    github_release -> staging_deployer [label="Deploy Staging"];
    staging_deployer -> smoke_tester [label="Run Smoke Tests"];
    smoke_tester -> production_deployer [label="Deploy Production"];
    production_deployer -> health_monitor [label="Monitor"];

    // === MONITORING FLOW ===
    health_monitor -> error_tracker [label="Track Errors"];
    error_tracker -> metric_collector [label="Collect Metrics"];
    metric_collector -> alert_manager [label="Manage Alerts"];

    // === NOTIFICATION FLOW ===
    github_release -> slack_announce [label="Announce"];
    github_release -> email_announce [label="Announce"];
    github_release -> docs_updater [label="Update Docs"];
    production_deployer -> social_announce [label="Announce"];

    // === COLLABORATION ===
    artifact_builder -> cicd_coord [label="Coordinate CI/CD"];
    production_deployer -> workflow_coord [label="Trigger Workflows"];
    github_release -> issue_coord [label="Close Issues"];

    // === FEEDBACK LOOPS ===
    alert_manager -> rollback_handler [label="Critical Error", style=dashed, color="#ef4444"];
    rollback_handler -> production_deployer [label="Rollback", style=dashed];
    smoke_tester -> rollback_handler [label="Smoke Test Fail", style=dashed, color="#ef4444"];

    // Legend
    subgraph cluster_legend {
        label="Legend";
        style=filled;
        color="#1a1f35";
        fontcolor="#ffffff";

        legend1 [label="Release Manager", fillcolor="#d97706", fontcolor="#ffffff"];
        legend2 [label="Versioning", fillcolor="#2563eb", fontcolor="#ffffff"];
        legend3 [label="Changelog", fillcolor="#059669", fontcolor="#ffffff"];
        legend4 [label="Validation", fillcolor="#0891b2", fontcolor="#ffffff"];
        legend5 [label="Deployment", fillcolor="#8b4789", fontcolor="#ffffff"];
        legend6 [label="Monitoring", fillcolor="#ef4444", fontcolor="#ffffff"];
    }
}
